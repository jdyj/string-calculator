/*
 * This Java source file was generated by the Gradle 'init' task.
 */
package com.string.calculator;

import static org.junit.jupiter.api.Assertions.assertEquals;
import static org.junit.jupiter.api.Assertions.assertThrows;

import java.io.ByteArrayInputStream;
import java.io.ByteArrayOutputStream;
import java.io.InputStream;
import java.io.OutputStream;
import java.io.PrintStream;
import org.junit.jupiter.api.BeforeEach;
import org.junit.jupiter.api.DisplayName;
import org.junit.jupiter.api.Test;

// 여러가지 경우의 테스트 작성하기 연산자가 없거나 등,,
class AppTest {

  String[] args = null;

  @Test
  @DisplayName("main 테스트 - 여러가지 연산자")
  void main() {
    String input =
        "32435456436754325674356756762221212798 - 342283024803781287013 * 235465789800876543223456543454 + 12341251246 - 3453476564534 + 13476857565743 * 1234567";

    assertEquals("num : -80595942770822941182435736008003954206997027825111\n",
        getOutputStream(input, args).toString());

  }

  @Test
  @DisplayName("main 테스트 - 곱셈만 있는 경우")
  void main3() {
    String input =
        "32435456436754325674356756762221212798 * 23452342345 * 233263464646 * 46565656565623423412312312134 * 2111235235";

    assertEquals(
        "num : 17444371097925106196697244640519041351612312748277072066098638108923528793486072764437728559127400\n",
        getOutputStream(input, args).toString());
  }

  @Test
  @DisplayName("main 테스트 - 덧셈만 있는 경우")
  void main4() {
    String input =
        "32435456436754325674356756762221212798 + 2134134 + 23635465786564 + 2364543654748654566787 + 876863213223123 + 437";

    assertEquals("num : 32435456436754328038901312009556923843\n",
        getOutputStream(input, args).toString());
  }

  @Test
  @DisplayName("main 테스트 - 뺄셈만 있는 경우")
  void main5() {
    String input =
        "32435456436754325674356756762221212798 - 3422830248037812870134434343434343434434343 - 0 - 234134 - 415657645 - 23452342345 - 233263464646 - 46565656565623423412312312134 - 2111235235";

    assertEquals("num : -3422797812581422681465325610101252768467684\n",
        getOutputStream(input, args).toString());
  }

  @Test
  @DisplayName("main 테스트 - 비어있는 경우")
  void main6() {
    String input = "";

    assertEquals("num : \n", getOutputStream(input, args).toString());
  }

  @Test
  @DisplayName("main 테스트 - 공백만 있는 경우")
  void main7() {
    String input = "  ";

    assertEquals("num : \n", getOutputStream(input, args).toString());
  }

  @Test
  @DisplayName("main 테스트 - 숫자만 있는 경우")
  void main8() {
    String input = "1234";

    assertEquals("num : 1234\n", getOutputStream(input, args).toString());
  }

  @Test
  @DisplayName("main 테스트 - 숫자와 공백만 있는 경우")
  void main9() {
    String input = "    1234   ";

    assertEquals("num : 1234\n", getOutputStream(input, args).toString());
  }

  @Test
  @DisplayName("main 테스트 - 연산자가 없는 경우")
  void main10() {
    String input = "12 34";

    assertThrows(IllegalStateException.class, () -> getOutputStream(input, args));
  }

  @Test
  @DisplayName("main 테스트 - 연산자만 있는 경우")
  void main11() {
    String input = "+";

    assertThrows(IllegalStateException.class, () -> getOutputStream(input, args));
  }

  private OutputStream getOutputStream(String input, String[] args) {
    InputStream in = new ByteArrayInputStream(input.getBytes());
    OutputStream out = new ByteArrayOutputStream();
    PrintStream printStream = new PrintStream(out);
    System.setOut(printStream);
    System.setIn(in);
    App.main(args);
    return out;
  }


}
